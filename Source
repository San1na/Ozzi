local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib(".", "Serpent")

-- MAIN
local Main = Window:NewTab("Главное")
local MainSection = Main:NewSection("Наживка")

local isRolling = false  -- This variable will control the rolling state

-- Button for the "Ролл" action (not needed for repeating roll)
MainSection:NewButton("Ролл", "", function()
    game:GetService("ReplicatedStorage"):WaitForChild("Network"):WaitForChild("Eggs_Roll"):InvokeServer()
end)

MainSection:NewKeybind("Вкл-Выкл Меню", ".", Enum.KeyCode.Y, function()
    Library:ToggleUI()
end)

-- Функция для покупки
local function purchaseAll()
    -- Покупки StandardMerchant
    for i = 1, 6 do
        local args = { [1] = "StandardMerchant", [2] = i }
        game:GetService("ReplicatedStorage"):WaitForChild("Network"):WaitForChild("CustomMerchants_Purchase"):InvokeServer(unpack(args))
        wait(0.2) -- Задержка для стабильности
    end

    -- Покупка PotionVendingMachine
    local args = { [1] = "PotionVendingMachine" }
    game:GetService("ReplicatedStorage"):WaitForChild("Network"):WaitForChild("VendingMachines_Purchase"):InvokeServer(unpack(args))
    wait(0.2)

    -- Покупки IceFishingMerchant
    for i = 1, 6 do
        local args = { [1] = "IceFishingMerchant", [2] = i }
        game:GetService("ReplicatedStorage"):WaitForChild("Network"):WaitForChild("CustomMerchants_Purchase"):InvokeServer(unpack(args))
        wait(0.2)
    end

    -- Покупки FishingMerchant
    for i = 1, 6 do
        local args = { [1] = "FishingMerchant", [2] = i }
        game:GetService("ReplicatedStorage"):WaitForChild("Network"):WaitForChild("CustomMerchants_Purchase"):InvokeServer(unpack(args))
        wait(0.2)
    end
end

-- Кнопка для разовой покупки
MainSection:NewButton("Все Мерчанты", "Купить всё сразу", function()
    purchaseAll()
end)

-- Автоматическая покупка
MainSection:NewToggle("Полностью Авто", "Покупать автоматически", function(state)
    _G.AutoPurchase = state

    if state then
        spawn(function()
            while _G.AutoPurchase do
                purchaseAll()
                wait(5) -- Интервал между циклами
            end
        end)
    else
        _G.AutoPurchase = false
    end
end)
